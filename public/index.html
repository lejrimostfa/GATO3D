<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>GATO3D Prototype</title>
  <style>
    body { margin: 0; overflow: hidden; background: #000; }
    #overlay {
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex; align-items: center; justify-content: center;
      z-index: 10; flex-direction: column; color: #0f0; font-family: monospace;
    }
    #overlay button {
      margin: 8px; padding: 12px 24px; font-size: 18px; cursor: pointer;
      background: #022; border: 1px solid #0f0; color: #0f0;
    }
    #gameCanvas { display: block; width: 100vw; height: 100vh; }
    #hud {
      position: absolute; top: 10px; left: 10px; color: #0f0;
      font-family: monospace; z-index: 5;
    }
  </style>
  <script>
    console.log('index.html inline script runs');
  </script>
</head>
<body>
  <div id="overlay" style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; z-index:10; flex-direction:column; color:#0f0; font-family:monospace;">
    <img src="titlescreen.png" alt="Titre GATO3D" style="max-width:80vw; max-height:70vh; object-fit:cover; margin-bottom:32px; border-radius:16px; box-shadow:0 6px 32px #000b;" />
    <button id="btn-create">Créer</button>
    <button id="btn-join">Rejoindre</button>
  </div>
  <canvas id="gameCanvas"></canvas>

  <!-- ==== UI Layer ==== -->
  <div id="ui-layer" style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:10;">

    <!-- == Time Controls == -->
    

    <!-- == Menus (Top Right) == -->
    <div id="ui-menus" style="pointer-events:auto;">
      <style>
        .menu-button {
          position: absolute;
          right: 20px;
          width: 180px;
          z-index: 13;
          background: rgba(17,17,34,0.65);
          color: #0ff;
          font-family: monospace;
          font-size: 16px;
          border: 1px solid #0ff;
          border-radius: 10px;
          padding: 8px 0;
          margin-top: 18px;
          box-shadow: 0 2px 12px #0006;
          transition: background 0.2s;
        }
        .menu-button:hover {
          background: rgba(17,34,51,0.85);
        }
        .menu-panel {
          position: absolute;
          right: 20px;
          width: 220px;
          background: rgba(17,17,34,0.7);
          border-radius: 10px;
          padding: 18px 10px 10px 10px;
          z-index: 14;
          display: none;
          flex-direction: column;
          gap: 16px;
          color: #0f0;
          font-family: monospace;
          box-shadow: 0 4px 20px #000a;
          border: 1px solid #0ff;
          backdrop-filter: blur(3px);
        }
      </style>
      <button id="visibility-toggle" class="menu-button" style="top:60px;">Objets visibles</button>
      <div id="visibility-panel" class="menu-panel" style="top:100px;"></div>
      <button id="game-settings-toggle" class="menu-button" style="top:118px;">Paramètres de jeu</button>
      <div id="game-settings-panel" class="menu-panel" style="top:158px;">
        <label style="color:#0f0; font-family:monospace;">Lumière soleil
          <input id="light-slider" type="range" min="0" max="2" step="0.01" value="0.21" style="width:180px; margin-top:4px;" />
          <div id="light-label" style="color:#0f0; font-family:monospace;">Light: 0.21</div>
        </label>
        <label style="color:#0f0; font-family:monospace; margin-top:10px;">Durée d'une journée
          <input id="day-duration-slider" type="range" min="30" max="600" step="10" value="120" style="width:180px; margin-top:4px;" />
          <div id="day-duration-label" style="color:#0f0; font-family:monospace;">Jour: 2.00 min</div>
        </label>
      </div>
      <button id="slider-toggle" class="menu-button" style="top:186px;">Réglages caméra</button>
      <div id="slider-panel" class="menu-panel" style="top:226px;">
        <label style="color:#0f0; font-family:monospace;">Distance caméra
          <input id="camera-slider" type="range" min="10" max="500" step="1" value="130" style="width:180px; margin-top:4px;" />
          <div id="camera-label" style="color:#0f0; font-family:monospace;">Camera: 130</div>
        </label>
        <label style="color:#0f0; font-family:monospace;">Altitude caméra
          <input id="altitude-slider" type="range" min="0" max="300" step="1" value="80" style="width:180px; margin-top:4px;" />
          <div id="altitude-label" style="color:#0f0; font-family:monospace;">Altitude: 80</div>
        </label>
      </div>
    </div>

    <!-- == Minimap Area (Bottom Left) == -->
    <div id="ui-bottom-bar" style="position:fixed; left:0; right:0; bottom:0; width:100vw; display:none; flex-direction:row; justify-content:space-between; align-items:flex-end; pointer-events:none; z-index:30;">
  <div id="ui-minimap-area" style="pointer-events:auto; display:flex; flex-direction:column; align-items:center; gap:8px;">
    <div style="position:relative; width:200px; height:200px;">
      <button id="minimap-zoom-in" style="position:absolute; left:0; bottom:210px; width:30px; height:30px; font-size:20px;">+</button>
      <button id="minimap-zoom-out" style="position:absolute; left:40px; bottom:210px; width:30px; height:30px; font-size:20px;">-</button>
      <button id="minimap-rotation-toggle" style="position:absolute; right:6px; top:6px; pointer-events:auto; background:#111c; color:#0ff; border-radius:6px; border:1px solid #0ff; font-family:monospace; font-size:15px; padding:2px 8px; width:26px; height:26px; display:flex; align-items:center; justify-content:center;">X</button>
      <svg id="compass" width="38" height="38" style="position:absolute; left:6px; top:6px;">
        <circle cx="19" cy="19" r="17" fill="#111c" stroke="#0ff" stroke-width="2"/>
        <polygon points="19,5 15,19 23,19" fill="#f00"/>
        <text x="19" y="35" text-anchor="middle" fill="#0ff" font-size="13" font-family="monospace">N</text>
      </svg>
      <canvas id="minimap" width="200" height="200" style="border-radius:10px; background:#111a; box-shadow:0 2px 12px #000b;"></canvas>
    </div>
    <div id="fps-counter" style="font-family:monospace; color:#0f0; background:#111c; border-radius:6px; padding:5px 12px; min-width:60px; text-align:center; margin-top:6px;">FPS: 0</div>
  </div>
  <div style="position:relative; display:inline-block;">
  <canvas id="clock-canvas" width="100" height="100" style="pointer-events:auto;"></canvas>
  <div style="position:absolute;top:40px;left:0;width:100px;text-align:center;pointer-events:none;"></div>
</div>
  <div id="ui-depth-indicator" style="pointer-events:auto; display:flex; flex-direction:column; align-items:center; gap:6px; min-height:200px;">
    <span id="depth-value" style="color:#0ff; font-family:monospace; min-width:44px; margin-bottom:8px;">0 m</span>
    <input id="depth-slider" type="range" min="0" max="200" step="1" value="0" disabled style="height:150px; width:28px; writing-mode: vertical-lr; direction: rtl; background:#223; border-radius:8px;">
  </div>
</div>

  </div>
  <!-- ==== End UI Layer ==== -->

  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.176.0/build/three.module.js"
    }
  }
  </script>
  <script type="module" src="js/main.js"></script>
</body>
</html>